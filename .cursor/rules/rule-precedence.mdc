---
alwaysApply: true
---
### 2. ðŸ“š PROJECT DOCUMENTATION
**Location**: `docs/` folder, `README.md`, `*.md` files in root

**Second priority - provides context and implementation details.**

Examples:
- `docs/LocalToProduction.md`
- `docs/DEPLOYMENT_SUCCESS.md`
- `docs/BranchLog.md`
- `README.md`
- `TEST_ERROR_HANDLING.md`

**Why second priority?**
- Project-specific implementation
- Historical decisions documented
- Troubleshooting guides
- Lessons learned

---

### 3. ðŸ‘¤ USER RULES
**Location**: User's general preferences/settings

**Third priority - general preferences that don't conflict with project.**

Examples:
- Code style preferences
- Comment preferences
- General best practices
- Workflow preferences

**When to apply?**
- âœ… When no project-specific rule exists
- âœ… When not conflicting with project rules
- âœ… For general coding standards

**When to IGNORE?**
- âŒ When conflicts with project rules
- âŒ When contradicts project documentation
- âŒ When would break project functionality

---

### 4. ðŸŒ GENERAL BEST PRACTICES
**Location**: Industry standards, framework docs, etc.

**Lowest priority - only when no other guidance exists.**

Examples:
- TypeScript best practices
- React best practices
- Astro conventions
- Security standards

---

## ðŸš¨ Conflict Resolution Examples

### Example 1: Deployment Method

**User Rule Says:**
```
"Use pame-core-cli for deployment"
```

**Project Rule Says:**
```
"Use gcloud CLI directly for deployment"
```

**RESOLUTION:**
âœ… **Follow Project Rule** - Use `gcloud CLI`

**Rationale:** Project-specific deployment method is critical for this project to work correctly.

---

### Example 2: CSS Framework Version

**User Rule Says:**
```
"Use latest Tailwind CSS v4"
```

**Project Rule Says:**
```
"ALWAYS use Tailwind CSS v3.4.x (NOT v4)"
```

**RESOLUTION:**
âœ… **Follow Project Rule** - Use Tailwind v3.4.x

**Rationale:** v4 is experimental and causes build failures in this project.

---

### Example 3: GCP Project

**User Rule Says:**
```
"Use user's default GCP project"
```

**Project Rule Says:**
```
"ALWAYS use gen-lang-client-0986191192"
```

**RESOLUTION:**
âœ… **Follow Project Rule** - Use gen-lang-client-0986191192

**Rationale:** All resources (Firestore, BigQuery) are in this specific project.

---

### Example 4: Code Style (No Conflict)

**User Rule Says:**
```
"Use semicolons in TypeScript"
```

**Project Rule Says:**
```
(No specific rule about semicolons)
```

**RESOLUTION:**
âœ… **Follow User Rule** - Use semicolons

**Rationale:** No project rule conflicts, so user preference applies.

---

## ðŸ“‹ Decision Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Is there a project-specific rule?                      â”‚
â”‚  â”œâ”€ YES â†’ Follow project rule (DONE)                   â”‚
â”‚  â””â”€ NO â†’ Continue                                        â”‚
â”‚                                                          â”‚
â”‚  Is there project documentation on this?                 â”‚
â”‚  â”œâ”€ YES â†’ Follow documentation (DONE)                  â”‚
â”‚  â””â”€ NO â†’ Continue                                        â”‚
â”‚                                                          â”‚
â”‚  Is there a user rule that makes sense?                  â”‚
â”‚  â”œâ”€ YES â†’ Follow user rule (DONE)                      â”‚
â”‚  â””â”€ NO â†’ Continue                                        â”‚
â”‚                                                          â”‚
â”‚  Apply general best practices (DONE)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” How to Identify Rule Source

### Project Rules (Highest Priority)
```
âœ… File is in .cursor/rules/*.mdc
âœ… File is in docs/ folder
âœ… Mentioned in project README
```

### User Rules (Lower Priority)
```
âš ï¸ General preference not specific to project
âš ï¸ Comes from user's Cursor settings
âš ï¸ Comes from user's general instructions
```

---

## ðŸ’¡ Guiding Principles

### 1. **Respect Project Requirements**
If a project rule exists, it's there for a reason. Don't override it without understanding why.

### 2. **Document Conflicts**
If you find a conflict, document it and ask the user for clarification.

### 3. **Prefer Explicit Over Implicit**
Project-specific rules are explicit. User rules might be implicit or general.

### 4. **When in Doubt, Ask**
If unsure about rule precedence, ask the user:
```
"I see a conflict between:
- Project rule: X
- User rule: Y

The project rule suggests Z because [reason].
Should I follow the project rule or would you like to override it?"
```

---

## ðŸš« Common Mistakes to Avoid

### âŒ WRONG: Applying User Rules Over Project Rules
```
User says: "Use pame-core-cli"
Project says: "Use gcloud CLI"
â†’ WRONG: Using pame-core-cli
âœ… RIGHT: Using gcloud CLI (project rule wins)
```

### âŒ WRONG: Ignoring Project Documentation
```
Project docs say: "Tailwind v3.4.x only"
General best practice: "Use latest version"
â†’ WRONG: Installing Tailwind v4
âœ… RIGHT: Using v3.4.x (project docs win)
```

### âŒ WRONG: Assuming All User Rules Apply
```
User rule: "Create helper scripts for efficiency"
Project rule: "Use standard tools, no workarounds"
â†’ WRONG: Creating helper scripts
âœ… RIGHT: Following project approach (project rule wins)
```

---

## âœ… Correct Behavior Examples

### Example 1: Checking for Project Rules First
```
Task: Deploy to production

Step 1: Check .cursor/rules/project-identity.mdc
â†’ Found: "Use gcloud CLI, NOT pame-core-cli"

Step 2: Follow project rule
â†’ Use: gcloud run deploy ...

Result: âœ… Correct deployment method used
```

### Example 2: Falling Back to User Rules
```
Task: Format code comments

Step 1: Check project rules
â†’ No specific rule about comment format

Step 2: Check user rules
â†’ User prefers JSDoc style comments

Step 3: Apply user rule
â†’ Use JSDoc format

Result: âœ… User preference applied (no conflict)
```

### Example 3: Identifying Conflict and Asking
```
Task: Choose testing framework

Step 1: Check project rules
â†’ Found: "No testing framework configured yet"

Step 2: Check user rules
â†’ User prefers Jest

Step 3: No conflict, but major decision
â†’ Ask user: "No testing framework is configured.
   Would you like me to set up Jest?"

Result: âœ… User consulted for major decision
```

---

## ðŸ“ When to Update Rules

### Update Project Rules When:
- âœ… Project requirements change
- âœ… New technology is adopted
- âœ… Critical issues are discovered
- âœ… User explicitly requests project-level change

### Update User Rules When:
- âœ… Personal preferences change
- âœ… Working across multiple projects
- âœ… General workflow improvements

**Never update project rules based on user rules without explicit permission.**

---

## ðŸŽ¯ Summary

```
CONFLICT? â†’ CHECK PROJECT RULES FIRST
         â†’ PROJECT RULE EXISTS? â†’ FOLLOW IT
         â†’ NO PROJECT RULE? â†’ CHECK DOCS
                            â†’ DOCS EXIST? â†’ FOLLOW THEM
                            â†’ NO DOCS? â†’ CHECK USER RULES
                                       â†’ USER RULE MAKES SENSE? â†’ FOLLOW IT
                                       â†’ ELSE â†’ BEST PRACTICES
```

**Golden Rule:**
> "When in doubt, project-specific rules ALWAYS win over general user preferences."

---

**Last Updated**: 2025-10-12
**Priority**: CRITICAL
**Applies To**: All AI assistants working on this project
