ğŸŒ Environment: Local Development
ğŸ“¦ Project: salfagpt
ğŸ”§ Initializing Firestore client...
ğŸ“¦ Project ID: salfagpt
ğŸŒ Environment: local
ğŸ—ï¸  Node ENV: development
âœ… Firestore client initialized successfully
ğŸ’¡ Local dev: Ensure you have run "gcloud auth application-default login"
ğŸ’¡ Production: Uses Workload Identity automatically
ğŸ“Š BigQuery Agent Search initialized
  Project: salfagpt
ğŸ“Š BigQuery Optimized Search initialized
  Project: salfagpt
  Dataset: flow_rag_optimized (NEW - optimized)
  Table: document_chunks_vectorized
ğŸ”¬ GREEN vs BLUE BigQuery Benchmark
=======================================================================

Configuration:
  User: usr_uhwqffaqag1wrryd82tw
  Agent: "GESTION BODEGAS GPT (S001)"
  Query: "Â¿CuÃ¡l es el procedimiento para inventario de existencias?"

ğŸ” Finding agent: "GESTION BODEGAS GPT (S001)" for user usr_uhwqffaqag1wrryd82tw...
  âœ“ Found agent: AjtQZEIMQvFnPRJRjl4y
âœ… Using agent: AjtQZEIMQvFnPRJRjl4y

ğŸš€ Starting parallel benchmark...
=======================================================================

ğŸ”¬ Testing GREEN...
ğŸ” [OPTIMIZED] BigQuery Vector Search starting...
  User: usr_uhwqffaqag1wrryd82tw
  Agent: AjtQZEIMQvFnPRJRjl4y
  Query: "Â¿CuÃ¡l es el procedimiento para inventario de existencias?..."
  Config: topK=8, minSim=0.25
  [1/4] Generating query embedding...
ğŸ”‘ [Embeddings] Loaded API key from .env file
ğŸ§® [Gemini AI] Generating semantic embedding (Â¿CuÃ¡l es el procedimiento para inventario de exist...)

ğŸ”¬ Testing BLUE...
ğŸ” BigQuery Agent Search starting...
  Current User: usr_uhwqffaqag1wrryd82tw
  Agent: AjtQZEIMQvFnPRJRjl4y
  Query: "Â¿CuÃ¡l es el procedimiento para inventario de existencias?..."
  TopK: 8, MinSimilarity: 0.25
  ğŸ”‘ Effective owner for context: usr_uhwqffaqag1wrryd82tw (own agent)
     Current user ID: usr_uhwqffaqag1wrryd82tw
  1/4 Generating query embedding...
ğŸ”‘ [Embeddings] Loaded API key from .env file
ğŸ§® [Gemini AI] Generating semantic embedding (Â¿CuÃ¡l es el procedimiento para inventario de exist...)
âœ… [Gemini AI] Generated SEMANTIC embedding: 768 dimensions
  âœ“ Embedding ready (3761ms)
  [2/4] Loading sources assigned to agent...
âœ… [Gemini AI] Generated SEMANTIC embedding: 768 dimensions
  âœ“ Query embedding generated (2470ms)
  2/4 Getting sources assigned to agent...
  ğŸ” Searching Firestore for sources assigned to agent AjtQZEIMQvFnPRJRjl4y...
     Step 1: Querying by assignedToAgents, then filtering by userId
  âœ“ Found 0 sources (829ms)
  âš ï¸ No sources assigned to agent
  âœ“ Duration: 4593ms
  âœ“ Results: 0 chunks
  âœ“ Avg similarity: 0.0%
     Query result: 76 sources found (before userId filter)
     After userId filter: 0 sources match effectiveUserId
     Step 1 result: 0 sources found
     Step 2: No sources found with effectiveUserId, checking agent owner...
     Agent found: owner userId = usr_uhwqffaqag1wrryd82tw
     Comparing: effectiveUserId (usr_uhwqffaqag1wrryd82tw) vs agent.userId (usr_uhwqffaqag1wrryd82tw)
     Are they different? false
     Same user - not trying owner lookup (would be redundant)
  ğŸ“Š FINAL RESULT: 0 sources will be used for RAG search
  âš ï¸ No sources assigned to this agent
  âœ“ Duration: 5820ms
  âœ“ Results: 0 chunks
  âœ“ Avg similarity: 0.0%


ğŸ“Š BENCHMARK RESULTS
=======================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Metric                  â”‚ ğŸ”µ BLUE         â”‚ ğŸŸ¢ GREEN        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Success                 â”‚ âŒ No          â”‚ âŒ No          â”‚
â”‚ Duration                â”‚ 5820       ms â”‚ 4593       ms â”‚
â”‚ Results Found           â”‚ 0               â”‚ 0               â”‚
â”‚ Avg Similarity          â”‚ 0.0          % â”‚ 0.0          % â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ¯ Target Performance Check:
=======================================================================
  âŒ GREEN FAILED: undefined
  âŒ BLUE FAILED: undefined

ğŸ Recommendation:
=======================================================================
  âš ï¸ Review results above for issues

