# ğŸ“Š User Role Comparison - Current vs. Intended

**Date:** November 28, 2025  
**Total Users:** 35  
**Changes Needed:** 32 users need role update (user â†’ expert)

---

## ğŸ“‹ Complete Comparison Table

| # | Email | Hash ID | Current Role | Intended Role | Change Needed? |
|---|-------|---------|--------------|---------------|----------------|
| 1 | svillegas@maqsa.cl | usr_pml9voxfc4lqbnfk8rqj | **user** | **expert** | âœ… YES |
| 2 | csolis@maqsa.cl | usr_w21p1e6pixfge0q8bob6 | **user** | **expert** | âœ… YES |
| 3 | fmelin@maqsa.cl | usr_vr9tl0exyyui02ls3hwa | **user** | **expert** | âœ… YES |
| 4 | riprado@maqsa.cl | usr_t2ekdkdpv6jrk73htxq5 | **user** | **expert** | âœ… YES |
| 5 | jcalfin@maqsa.cl | usr_8qmjyvtg8tg0xsl8c1z4 | **user** | **expert** | âœ… YES |
| 6 | mmichael@maqsa.cl | usr_m8x0o1uch0v7jjpbtx13 | **user** | **expert** | âœ… YES |
| 7 | mfuenzalidar@novatec.cl | usr_9oi2vv65mc7i8l5cvygj | **user** | **expert** | âœ… YES |
| 8 | phvaldivia@novatec.cl | usr_3axcxf6fmlx3x67ftm46 | **user** | **expert** | âœ… YES |
| 9 | yzamora@inoval.cl | usr_74842n1lmwmixckbfd5h | **user** | **expert** | âœ… YES |
| 10 | jcancinoc@inoval.cl | usr_5dbo2wo4s4cjcfa9182s | **user** | **expert** | âœ… YES |
| 11 | lurriola@novatec.cl | usr_bqtj9zmjs7hk2hx70lmv | **user** | **expert** | âœ… YES |
| 12 | fcerda@constructorasalfa.cl | usr_a7l7qm5xfib2zt7lvq0l | **user** | **expert** | âœ… YES |
| 13 | gfalvarez@novatec.cl | usr_izeex3ge894knahdc5m4 | **user** | **expert** | âœ… YES |
| 14 | dortega@novatec.cl | usr_88t5afso42zcb01e0k20 | **user** | **expert** | âœ… YES |
| 15 | mburgoa@novatec.cl | usr_flizalgeb8bqr2ohzpfg | **user** | **expert** | âœ… YES |
| 16 | abhernandez@maqsa.cl | usr_8hlyklukeedy4hdbt593 | **user** | **expert** | âœ… YES |
| 17 | cvillalon@maqsa.cl | usr_e8tyate4jwgznmhwdrnv | **user** | **expert** | âœ… YES |
| 18 | hcontrerasp@salfamontajes.com | usr_hrc1zew3gt6g2djt7x6h | **user** | **expert** | âœ… YES |
| 19 | iojedaa@maqsa.cl | usr_iojedaa_maqsa_cl | **expert** | **expert** | â­ï¸ NO (already expert) |
| 20 | **jefarias@maqsa.cl** | **usr_ean9wq3a90a1bys2fv3m** | **expert** | **expert** | â­ï¸ **NO (already expert)** |
| 21 | msgarcia@maqsa.cl | usr_3gielx6tzgjydt5txfxl | **user** | **expert** | âœ… YES |
| 22 | ojrodriguez@maqsa.cl | usr_nwg5sz108lhsvj0n5ev4 | **user** | **expert** | âœ… YES |
| 23 | paovalle@maqsa.cl | usr_6oypj6gho0c0r2azt00y | **user** | **expert** | âœ… YES |
| 24 | salegria@maqsa.cl | usr_salegria_maqsa_cl | **expert** | **expert** | â­ï¸ NO (already expert) |
| 25 | vaaravena@maqsa.cl | usr_9r36u6p1uux2x4uu26nm | **user** | **expert** | âœ… YES |
| 26 | vclarke@maqsa.cl | usr_4bp9uq03gs6aqgpa9fv9 | **user** | **expert** | âœ… YES |
| 27 | jriverof@iaconcagua.com | usr_0gvw57ef9emxgn6xkrlz | **user** | **expert** | âœ… YES |
| 28 | afmanriquez@iaconcagua.com | usr_y7jz76qht6i6bmi6fumf | **user** | **expert** | âœ… YES |
| 29 | cquijadam@iaconcagua.com | usr_8jlcav8xl4q6f0kulns2 | **user** | **expert** | âœ… YES |
| 30 | ireygadas@iaconcagua.com | usr_023vr00lgztzaf3pqzrs | **user** | **expert** | âœ… YES |
| 31 | jmancilla@iaconcagua.com | usr_p0souwng0mism3zhy0ms | **user** | **expert** | âœ… YES |
| 32 | mallende@iaconcagua.com | usr_me1s6v6u09xvf6jya8x5 | **user** | **expert** | âœ… YES |
| 33 | recontreras@iaconcagua.com | usr_ooluw9oj0nj3ugyyav5h | **user** | **expert** | âœ… YES |
| 34 | dundurraga@iaconcagua.com | usr_c314cxif3fewsv1kvqdo | **user** | **expert** | âœ… YES |
| 35 | rfuentesm@inoval.cl | usr_jo5x79aframenkmfalpx | **user** | **expert** | âœ… YES |

---

## ğŸ“ˆ Summary Statistics

### Role Changes Breakdown

| Status | Count | Percentage |
|--------|-------|------------|
| **Already Expert** (no change) | 3 | 8.6% |
| **Need Promotion** (user â†’ expert) | 32 | 91.4% |
| **Need Demotion** | 0 | 0% |

### Users Already with Expert Role âœ…

1. iojedaa@maqsa.cl (`usr_iojedaa_maqsa_cl`)
2. **jefarias@maqsa.cl** (`usr_ean9wq3a90a1bys2fv3m`)
3. salegria@maqsa.cl (`usr_salegria_maqsa_cl`)

All three are from **MAQSA domain** (maqsa.cl).

### Users Needing Promotion to Expert (32 users)

**By Domain:**
- **maqsa.cl:** 13 users need promotion
- **novatec.cl:** 6 users need promotion
- **inoval.cl:** 3 users need promotion
- **iaconcagua.com:** 8 users need promotion
- **constructorasalfa.cl:** 1 user needs promotion
- **salfamontajes.com:** 1 user needs promotion

---

## ğŸ”„ What Changes When Promoted to Expert?

### Current Permissions (user role)
- âœ… Create agents
- âœ… Delete own agents
- âœ… Upload context
- âœ… Use basic features

### New Permissions (expert role)
- âœ… **Validate context sources** (mark as "âœ“ Validado")
- âœ… **Access analytics dashboard**
- âœ… **Review agent configurations**
- âœ… **Advanced model options** (Pro model)
- âœ… **Share agents** with others
- âœ… **View own usage costs**
- âœ… **Export data**

**Impact:** Experts have significantly more capabilities for quality control and advanced features.

---

## ğŸ“ Batch Update Script

To promote all 32 users to expert role, you can run:

```bash
npx tsx scripts/batch-update-roles.ts --to-expert
```

Or update individually:
```bash
# Example for one user
npx tsx scripts/update-user-role.ts \
  --email=svillegas@maqsa.cl \
  --role=expert
```

---

## âš ï¸ Important Considerations

### Before Making Changes

1. **Verify Business Requirements:**
   - Are all these users truly business/technical experts?
   - Do they need advanced permissions?
   - Should some remain as standard users?

2. **Impact Assessment:**
   - Expert role grants validation permissions
   - Experts can certify context sources
   - Experts can access analytics
   - May affect billing/usage tracking

3. **Rollback Plan:**
   - All changes can be reversed
   - Original roles documented in this report
   - Firestore allows instant updates

### Backward Compatibility âœ…

- âœ… **No breaking changes** - Role updates are additive
- âœ… **No data loss** - All user data preserved
- âœ… **No feature removal** - Standard features still work
- âœ… **Permissions expand** - Users gain capabilities, don't lose any

---

## ğŸ¯ Recommended Approach

### Option 1: Promote All (As Per Your List)
```bash
# Batch update all 32 users to expert
npx tsx scripts/batch-update-roles.ts --to-expert --confirm
```

**Pros:**
- âœ… Aligns with your business requirements
- âœ… All domain experts have advanced features
- âœ… Consistent permissions across teams

**Cons:**
- âš ï¸ May grant unnecessary permissions to some users
- âš ï¸ Harder to track who's actively using expert features

### Option 2: Selective Promotion (Recommended)
Promote only active users or team leads first:
1. Start with most active users
2. Monitor usage and feedback
3. Gradually promote others as needed

**Pros:**
- âœ… Controlled rollout
- âœ… Better permission management
- âœ… Can validate expert features work correctly

**Cons:**
- âš ï¸ More manual work
- âš ï¸ Some users won't have features immediately

---

## ğŸš¨ **Answer to Your Original Question:**

**For jefarias@maqsa.cl:**
- **Current Type:** `expert` âœ…
- **Intended Type:** `expert` âœ…
- **Hash ID:** `usr_ean9wq3a90a1bys2fv3m`
- **Change Needed:** â­ï¸ **NO** - Already has expert role

The user is already correctly configured as an expert in the system!

---

**Would you like me to:**
1. Create a script to batch-update the 32 users from user â†’ expert?
2. Show you the specific permissions each role has?
3. Generate a phased rollout plan for expert promotion?


